{% extends "base.html" %}
{% block title %}FAQ{% endblock %}

{% block content %}
{% include "partials/slide_detail.html" with title="Асуулт, хариулт жагсаалт" %}
<div class="container py-4">

  <div class="d-flex justify-content-between align-items-center mb-3 flex-wrap gap-2">
    {% if user.is_authenticated %}
    <div class="d-flex gap-2">
      <a href="{% url 'faq_create' %}" class="btn btn-primary btn-sm">
        + Шинэ асуулт, хариулт
      </a>
      <a href="{% url 'my_faq_list' %}" class="btn btn-outline-secondary btn-sm">
        Миний асуулт, хариулт
      </a>
    </div>
    {% endif %}
  </div>

  {% if faqs %}
  <div class="card shadow-sm">
    <div class="card-body p-0">
      <ul class="list-group list-group-flush mb-0">
        {% for item in faqs %}
        <li class="list-group-item">
          <h2 class="h4 mb-1">
            <a href="{% url 'faq_detail' item.pk %}" class="text-decoration-none">
              {{ item.question }}
            </a>
          </h2>

          {% if item.answer %}
          <p class="mb-2 text-muted small">
            {{ item.answer|truncatewords:35 }}
          </p>
          {% endif %}
          <div class="small">
            <a href="{% url 'faq_detail' item.pk %}">Дэлгэрэнгүй</a> | {% if user.is_authenticated %}
            {% if item.author == user or user.is_superuser %}<a href="{% url 'faq_update' item.pk %}">Засах</a> |
            <a href="{% url 'faq_delete' item.pk %}">Устгах</a>{% endif %}
            {% endif %}
          </div>
        </li>
        {% endfor %}
      </ul>
    </div>
  </div>
  {% else %}
  <div class="alert alert-info">
    Одоогоор асуулт, хариулт олдсонгүй.
    {% if user.is_authenticated %}
    <a href="{% url 'faq_create' %}" class="alert-link">
      Эхний асуулт, хариулт нэмэх
    </a>.
    {% endif %}
  </div>
  {% endif %}
</div>
{% endblock %}