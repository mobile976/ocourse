{% extends "base.html" %}
{% block title %}Хүсэж буй хичээлүүд{% endblock %}

{% block content %}
{% include "partials/slide_detail.html" with title="Үзхийг хүсэж буй хичээлүүд" %}
<div class="container py-4">
  <div class="d-flex justify-content-between align-items-center mb-3 flex-wrap gap-2">
    <a href="{% url 'wish_create' %}" class="btn btn-primary btn-sm">
      + Шинэ пост оруулах
    </a>
  </div>

  {% if wishes %}
  <div class="card shadow-sm">
    <div class="card-body p-0">
      <ul class="list-group list-group-flush mb-0">
        {% for w in wishes %}
        <li class="list-group-item">

          <h3 class="h4 mb-1">
            <a href="{% url 'wish_detail' w.pk %}" class="text-decoration-none">
              {{ w.title }}
            </a>
          </h3>
          <div class="small text-muted">
            {{ w.name }} -аас {{ w.created_at|date:"Y-m-d" }}
            {% if w.name %}
            өдөр оруулсан пост
            {% endif %}
          </div>
          {% if w.desired_level %}
          <div class="mb-1">
            <span class="badge text-bg-secondary" style="margin-bottom: 15px;">
              Хичээлийн түвшин: {{ w.get_desired_level_display }}
            </span>
          </div>
          {% endif %}
          {% if w.description %}
          <p class="mb-2 text-muted small">
            {{ w.description|truncatewords:25 }}
          </p>
          {% endif %}

          <a href="{% url 'wish_detail' w.pk %}" class="text-decoration-none">
            Дэлгэрэнгүй
          </a>
        </li>
        {% endfor %}
      </ul>
    </div>
  </div>
  {% else %}
  <div class="alert alert-info">
    Одоогоор хүсэлт алга.
    <a href="{% url 'wish_create' %}" class="alert-link">
      Эхний хүсэлтээ үлдээх
    </a>.
  </div>
  {% endif %}

</div>
{% endblock %}